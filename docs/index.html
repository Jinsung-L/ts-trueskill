<!doctype html>
<html class="default no-js">
<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<title>ts-trueskill</title>
	<meta name="description" content="">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link rel="stylesheet" href="assets/css/main.css">
</head>
<body>
<header>
	<div class="tsd-page-toolbar">
		<div class="container">
			<div class="table-wrap">
				<div class="table-cell" id="tsd-search" data-index="assets/js/search.js" data-base=".">
					<div class="field">
						<label for="tsd-search-field" class="tsd-widget search no-caption">Search</label>
						<input id="tsd-search-field" type="text" />
					</div>
					<ul class="results">
						<li class="state loading">Preparing search index...</li>
						<li class="state failure">The search index is not available</li>
					</ul>
					<a href="index.html" class="title">ts-trueskill</a>
				</div>
				<div class="table-cell" id="tsd-widgets">
					<div id="tsd-filter">
						<a href="#" class="tsd-widget options no-caption" data-toggle="options">Options</a>
						<div class="tsd-filter-group">
							<div class="tsd-select" id="tsd-filter-visibility">
								<span class="tsd-select-label">All</span>
								<ul class="tsd-select-list">
									<li data-value="public">Public</li>
									<li data-value="protected">Public/Protected</li>
									<li data-value="private" class="selected">All</li>
								</ul>
							</div>
							<input type="checkbox" id="tsd-filter-inherited" checked />
							<label class="tsd-widget" for="tsd-filter-inherited">Inherited</label>
							<input type="checkbox" id="tsd-filter-externals" checked />
							<label class="tsd-widget" for="tsd-filter-externals">Externals</label>
							<input type="checkbox" id="tsd-filter-only-exported" />
							<label class="tsd-widget" for="tsd-filter-only-exported">Only exported</label>
						</div>
					</div>
					<a href="#" class="tsd-widget menu no-caption" data-toggle="menu">Menu</a>
				</div>
			</div>
		</div>
	</div>
	<div class="tsd-page-title">
		<div class="container">
			<ul class="tsd-breadcrumb">
				<li>
					<a href="globals.html">Globals</a>
				</li>
			</ul>
			<h1> ts-trueskill</h1>
		</div>
	</div>
</header>
<div class="container container-main">
	<div class="row">
		<div class="col-8 col-content">
			<div class="tsd-panel tsd-typography">
				<h1 id="ts-trueskill">ts-trueskill</h1>
				<p><a href="https://www.npmjs.com/package/toastr-ng2"><img src="https://img.shields.io/npm/v/toastr-ng2.svg?maxAge=3600" alt="npm"></a>
					<a href="https://travis-ci.org/scttcper/ts-trueskill"><img src="https://img.shields.io/travis/scttcper/ts-trueskill.svg" alt="build status"></a>
				<a href="https://codecov.io/gh/scttcper/ts-trueskill"><img src="https://codecov.io/gh/scttcper/ts-trueskill/branch/master/graph/badge.svg" alt="coverage status"></a></p>
				<p>TypeScript port of the excellent <a href="https://github.com/sublee/trueskill">python TrueSkill package</a> by Heungsub Lee</p>
				<h3 id="what-s-trueskill-">What&#39;s TrueSkill™</h3>
				<p><a href="http://research.microsoft.com/en-us/projects/trueskill">TrueSkill</a> is a rating system for players of a game. It was developed, patented, and trademarked by Microsoft Research and has been used on Xbox LIVE for ranking and matchmaking service. This system quantifies players’ TRUE skill points by the Bayesian inference algorithm. It also works well with any type of match rule including N:N team game or free-for-all.</p>
				<p>Read about <a href="https://www.microsoft.com/en-us/research/project/trueskill-ranking-system/">how the trueskill model works</a></p>
				<h3 id="installation">Installation</h3>
				<p>This package is available on <a href="https://www.npmjs.com/package/toastr-ng2">npm</a>:</p>
				<pre><code class="lang-bash">npm install ts-trueskill
</code></pre>
				<h3 id="use">Use</h3>
				<pre><code class="lang-typescript"><span class="hljs-keyword">import</span> { Rating } from <span class="hljs-string">'ts-trueskill'</span>;
<span class="hljs-keyword">new</span> Rating()  <span class="hljs-comment">// use the default mu and sigma</span>
</code></pre>
				<p>If some player&#39;s rating is higher :math:<code>\beta</code> than another player&#39;s, the
					player may have about a 76% (specifically :math:<code>\Phi(\frac {1}{\sqrt{2}})</code>)
					chance to beat the other player.  The default value of :math:<code>\beta</code> is
				:math:<code>\frac{ 25 }{ 6 }</code>.</p>
				<p>Ratings will approach real skills through few times of the TrueSkill&#39;s Bayesian
					inference algorithm.  How many matches TrueSkill needs to estimate real skills?
				It depends on the game rule.  See the below table:</p>
				<p>================  =======
					Rule              Matches
					================  =======
					16P free-for-all  3
					8P free-for-all   3
					4P free-for-all   5
					2P free-for-all   12
					2:2:2:2           10
					4:4:4:4           20
					4:4               46
					8:8               91
				================  =======</p>
				<h2 id="head-to-head-1-vs-1-match-rule">Head-to-head (1 vs. 1) match rule</h2>
				<p>Most competition games follows 1:1 match rule.  If your game does, just use
					<code>_1vs1</code> shortcuts containing :func:<code>rate_1vs1</code> and :func:<code>quality_1vs1</code>.
				These are very easy to use.</p>
				<p>First of all, we need 2 :class:<code>Rating</code> objects::</p>
				<blockquote>
					<blockquote>
						<blockquote>
							<p>r1 = Rating()  # 1P&#39;s skill
							r2 = Rating()  # 2P&#39;s skill</p>
						</blockquote>
					</blockquote>
				</blockquote>
				<p>Then we can guess match quality which is equivalent with draw probability of
				this match using :func:<code>quality_1vs1</code>::</p>
				<blockquote>
					<blockquote>
						<blockquote>
							<p>print(&#39;{:.1%} chance to draw&#39;.format(quality_1vs1(r1, r2)))
							44.7% chance to draw</p>
						</blockquote>
					</blockquote>
				</blockquote>
				<p>After the game, TrueSkill recalculates their ratings by the game result.  For
				example, if 1P beat 2P::</p>
				<blockquote>
					<blockquote>
						<blockquote>
							<p>new_r1, new_r2 = rate_1vs1(r1, r2)
								print(new_r1)
								trueskill.Rating(mu=29.396, sigma=7.171)
								print(new_r2)
							trueskill.Rating(mu=20.604, sigma=7.171)</p>
						</blockquote>
					</blockquote>
				</blockquote>
				<p>Mu value follows player&#39;s win/draw/lose records.  Higher value means higher
					game skill.  And sigma value follows the number of games.  Lower value means
				many game plays and higher rating confidence.</p>
				<p>So 1P, a winner&#39;s skill grew up from 25 to 29.396 but 2P, a loser&#39;s skill shrank
				to 20.604.  And both sigma values became narrow about same magnitude.</p>
				<p>Of course, you can also handle a tie game with <code>drawn=True</code>::</p>
				<blockquote>
					<blockquote>
						<blockquote>
							<p>new_r1, new_r2 = rate_1vs1(r1, r2, drawn=True)
								print(new_r1)
								trueskill.Rating(mu=25.000, sigma=6.458)
								print(new_r2)
							trueskill.Rating(mu=25.000, sigma=6.458)</p>
						</blockquote>
					</blockquote>
				</blockquote>
				<h2 id="other-match-rules">Other match rules</h2>
				<p>There are many other match rules such as N:N team match, N:N:N multiple team
					match, N:M unbalanced match, free-for-all (Player vs. All), and so on.  Mostly
					other rating systems cannot work with them but TrueSkill does.  TrueSkill
				accepts any types of matches.</p>
				<p>We should arrange ratings into a group by their team::</p>
				<blockquote>
					<blockquote>
						<blockquote>
							<p>r1 = Rating()  # 1P&#39;s skill
								r2 = Rating()  # 2P&#39;s skill
								r3 = Rating()  # 3P&#39;s skill
								t1 = [r1]  # Team A contains just 1P
							t2 = [r2, r3]  # Team B contains 2P and 3P</p>
						</blockquote>
					</blockquote>
				</blockquote>
				<p>Then we can calculate the match quality and rate them::</p>
				<blockquote>
					<blockquote>
						<blockquote>
							<p>print(&#39;{:.1%} chance to draw&#39;.format(quality([t1, t2])))
								13.5% chance to draw
								(new_r1,), (new_r2, new_r3) = rate([t1, t2], ranks=[0, 1])
								print(new_r1)
								trueskill.Rating(mu=33.731, sigma=7.317)
								print(new_r2)
								trueskill.Rating(mu=16.269, sigma=7.317)
								print(new_r3)
							trueskill.Rating(mu=16.269, sigma=7.317)</p>
						</blockquote>
					</blockquote>
				</blockquote>
				<p>If you want to describe other game results, set the <code>ranks</code> argument like the
				below examples:</p>
				<ul>
					<li>A drawn game -- <code>ranks=[0, 0]</code></li>
					<li>Team B won not team A -- <code>ranks=[1, 0]</code> (Lower rank is better)</li>
				</ul>
				<p>Additionally, here are varied patterns of rating groups.  All variables which
				start with <code>r</code> are :class:<code>Rating</code> objects:</p>
				<ul>
					<li>N:N team match -- <code>[(r1, r2, r3), (r4, r5, r6)]</code></li>
					<li>N:N:N multiple team match -- <code>[(r1, r2), (r3, r4), (r5, r6)]</code></li>
					<li>N:M unbalanced match -- <code>[(r1,), (r2, r3, r4)]</code></li>
					<li>Free-for-all -- <code>[(r1,), (r2,), (r3,), (r4,)]</code></li>
				</ul>
				<h2 id="partial-play">Partial play</h2>
				<p>Let&#39;s assume that there are 2 teams which each has 2 players.  The game was for
					a hour but the one of players on the first team entered the game at 30 minutes
				later.</p>
				<p>If some player wasn&#39;t present for the entire duration of the game, use the
					concept of &quot;partial play&quot; by <code>weights</code> parameter.  The above situation can be
				described by the following weights:</p>
				<p>.. hlist::</p>
				<ul>
					<li>1P on team A -- 1.0 = Full time</li>
					<li>2P on team A -- 0.5 = :math:<code>\frac{ 30 }{ 60 }</code> minutes</li>
					<li>3P on team B -- 1.0</li>
					<li>4P on team B -- 1.0</li>
				</ul>
				<p>As a code with a 2-dimensional list::</p>
				<h1 id="set-each-weights-to-1-0-5-1-1-">set each weights to 1, 0.5, 1, 1.</h1>
				<p>   rate([(r1, r2), (r3, r4)], weights=[(1, 0.5), (1, 1)])
				quality([(r1, r2), (r3, r4)], weights=[(1, 0.5), (1, 1)])</p>
				<p>Or with a dictionary.  Each keys are a tuple of
				<code>(team_index, index_or_key_of_rating)</code>::</p>
				<h1 id="set-a-weight-of-2nd-player-in-1st-team-to-0-5-otherwise-leave-as-1-">set a weight of 2nd player in 1st team to 0.5, otherwise leave as 1.</h1>
				<p>   rate([(r1, r2), (r3, r4)], weights={(0, 1): 0.5})</p>
				<h1 id="set-a-weight-of-carol-in-2nd-team-to-0-5-otherwise-leave-as-1-">set a weight of Carol in 2nd team to 0.5, otherwise leave as 1.</h1>
				<p>   rate([{&#39;alice&#39;: r1, &#39;bob&#39;: r2}, {&#39;carol&#39;: r3}], weights={(1, &#39;carol&#39;): 0.5})</p>
				<h3 id="backends">Backends</h3>
				<p>While the python implementation supports different math backends, currently the TypeScript version does not.</p>
				<h2 id="api">API</h2>
				<h3 id="trueskill-objects">TrueSkill objects</h3>
				<h4 id="class-trueskill-rating">class trueskill.Rating</h4>
				<p>Represents a player’s skill as Gaussian distribution.</p>
				<p>The default mu and sigma value follows the global environment’s settings. If you don’t want to use the global, use TrueSkill.create_rating() to create the rating object.</p>
				<p>Parameters:    </p>
				<ul>
					<li>mu – the mean. (default=null)</li>
					<li>sigma – the standard deviation.  </li>
				</ul>
				<p><strong>mu</strong><br>A property which returns the mean.</p>
				<p><strong>sigma</strong><br>A property which returns the the square root of the variance.</p>
				<h4 id="class-trueskill-trueskill-mu-25-0-sigma-8-333333333333334-beta-4-166666666666667-tau-0-08333333333333334-draw_probability-0-1-backend-none-">class trueskill.TrueSkill(mu=25.0, sigma=8.333333333333334, beta=4.166666666666667, tau=0.08333333333333334, draw_probability=0.1, backend=None)</h4>
				<h3 id="default-values">Default values</h3>
				<pre><code class="lang-typescript">trueskill.MU = <span class="hljs-number">25.0</span>;
<span class="hljs-comment">// Default initial mean of ratings.</span>

trueskill.SIGMA = <span class="hljs-number">8.333333333333334</span>;
<span class="hljs-comment">// Default initial standard deviation of ratings.</span>

trueskill.BETA = <span class="hljs-number">4.166666666666667</span>;
<span class="hljs-comment">// Default distance that guarantees about 76% chance of winning.</span>

trueskill.TAU = <span class="hljs-number">0.08333333333333334</span>;
<span class="hljs-comment">// Default dynamic factor.</span>

trueskill.DRAW_PROBABILITY = <span class="hljs-number">0.1</span>;
<span class="hljs-comment">// Default draw probability of the game.</span>
</code></pre>
				<h3 id="head-to-head-shortcuts">Head-to-head shortcuts</h3>
				<p>Most competition games follows 1:1 match rule. If your game does, just use _1vs1 shortcuts containing <code>rate_1vs1()</code> and <code>quality_1vs1()</code>. These are very easy to use.</p>
				<p>First of all, we need 2 Rating objects:</p>
				<pre><code class="lang-typescript">r1 = <span class="hljs-keyword">new</span> Rating()  <span class="hljs-comment">// 1P's skill</span>
r2 = <span class="hljs-keyword">new</span> Rating()  <span class="hljs-comment">// 2P's skill</span>
</code></pre>
				<p>Then we can guess match quality which is equivalent with draw probability of this match using <code>quality_1vs1()</code>:</p>
				<blockquote>
					<blockquote>
						<blockquote>
							<p>print(&#39;{:.1%} chance to draw&#39;.format(quality_1vs1(r1, r2)))
								44.7% chance to draw
							After the game, TrueSkill recalculates their ratings by the game result. For example, if 1P beat 2P:</p>
						</blockquote>
					</blockquote>
				</blockquote>
				<pre><code class="lang-typescript">&gt;&gt;&gt; new_r1, new_r2 = rate_1vs1(r1, r2)
&gt;&gt;&gt; print(new_r1)
trueskill.Rating(mu=<span class="hljs-number">29.396</span>, sigma=<span class="hljs-number">7.171</span>)
&gt;&gt;&gt; print(new_r2)
</code></pre>
				<p>trueskill.Rating(mu=20.604, sigma=7.171)
				Mu value follows player’s win/draw/lose records. Higher value means higher game skill. And sigma value follows the number of games. Lower value means many game plays and higher rating confidence.</p>
				<p>So 1P, a winner’s skill grew up from 25 to 29.396 but 2P, a loser’s skill shrank to 20.604. And both sigma values became narrow about same magnitude.</p>
				<p>Of course, you can also handle a tie game with drawn=True:</p>
				<p>const [newR1, newR2] = rate_1vs1(r1, r2, drawn=True)</p>
				<blockquote>
					<blockquote>
						<blockquote>
							<p>print(new_r1)
								trueskill.Rating(mu=25.000, sigma=6.458)
								print(new_r2)
							trueskill.Rating(mu=25.000, sigma=6.458)</p>
						</blockquote>
					</blockquote>
				</blockquote>
				<h2 id="functions-for-the-global-environment">Functions for the global environment</h2>
				<p>.. autofunction:: global_env
					.. autofunction:: setup
					.. autofunction:: rate
					.. autofunction:: quality
				.. autofunction:: expose</p>
				<h2 id="draw-probability-helpers">Draw probability helpers</h2>
				<p>.. autofunction:: calc_draw_probability
				.. autofunction:: calc_draw_margin</p>
				<h2 id="mathematical-statistics-backends">Mathematical statistics backends</h2>
				<p>.. module:: trueskill.backends</p>
				<p>.. autofunction:: trueskill.backends.choose_backend
				.. autofunction:: trueskill.backends.available_backends</p>
				<h3 id="changelog">Changelog</h3>
				<p>Check releases <a href="https://github.com/scttcper/ts-trueskill/releases">https://github.com/scttcper/ts-trueskill/releases</a></p>
				<h3 id="license">License</h3>
				<p>This package is Licensed under MIT, but is a port of the <a href="http://en.wikipedia.org/wiki/BSD_licenses">BSD</a> licensed python TrueSkill package by Heungsub Lee. The <em>TrueSkill™</em> brand is not very permissive. Microsoft permits only Xbox Live games or non-commercial projects to use TrueSkill™.</p>
			</div>
		</div>
		<div class="col-4 col-menu menu-sticky-wrap menu-highlight">
			<nav class="tsd-navigation primary">
				<ul>
					<li class="globals  ">
						<a href="globals.html"><em>Globals</em></a>
					</li>
					<li class=" tsd-kind-external-module">
						<a href="modules/_factorgraph_.html">"factorgraph"</a>
					</li>
					<li class=" tsd-kind-external-module">
						<a href="modules/_index_.html">"index"</a>
					</li>
					<li class=" tsd-kind-external-module">
						<a href="modules/_mathematics_.html">"mathematics"</a>
					</li>
				</ul>
			</nav>
			<nav class="tsd-navigation secondary menu-sticky">
				<ul class="before-current">
				</ul>
			</nav>
		</div>
	</div>
</div>
<footer class="with-border-bottom">
	<div class="container">
		<h2>Legend</h2>
		<div class="tsd-legend-group">
			<ul class="tsd-legend">
				<li class="tsd-kind-module"><span class="tsd-kind-icon">Module</span></li>
				<li class="tsd-kind-object-literal"><span class="tsd-kind-icon">Object literal</span></li>
				<li class="tsd-kind-variable"><span class="tsd-kind-icon">Variable</span></li>
				<li class="tsd-kind-function"><span class="tsd-kind-icon">Function</span></li>
				<li class="tsd-kind-function tsd-has-type-parameter"><span class="tsd-kind-icon">Function with type parameter</span></li>
				<li class="tsd-kind-index-signature"><span class="tsd-kind-icon">Index signature</span></li>
				<li class="tsd-kind-type-alias"><span class="tsd-kind-icon">Type alias</span></li>
			</ul>
			<ul class="tsd-legend">
				<li class="tsd-kind-enum"><span class="tsd-kind-icon">Enumeration</span></li>
				<li class="tsd-kind-enum-member"><span class="tsd-kind-icon">Enumeration member</span></li>
				<li class="tsd-kind-property tsd-parent-kind-enum"><span class="tsd-kind-icon">Property</span></li>
				<li class="tsd-kind-method tsd-parent-kind-enum"><span class="tsd-kind-icon">Method</span></li>
			</ul>
			<ul class="tsd-legend">
				<li class="tsd-kind-interface"><span class="tsd-kind-icon">Interface</span></li>
				<li class="tsd-kind-interface tsd-has-type-parameter"><span class="tsd-kind-icon">Interface with type parameter</span></li>
				<li class="tsd-kind-constructor tsd-parent-kind-interface"><span class="tsd-kind-icon">Constructor</span></li>
				<li class="tsd-kind-property tsd-parent-kind-interface"><span class="tsd-kind-icon">Property</span></li>
				<li class="tsd-kind-method tsd-parent-kind-interface"><span class="tsd-kind-icon">Method</span></li>
				<li class="tsd-kind-index-signature tsd-parent-kind-interface"><span class="tsd-kind-icon">Index signature</span></li>
			</ul>
			<ul class="tsd-legend">
				<li class="tsd-kind-class"><span class="tsd-kind-icon">Class</span></li>
				<li class="tsd-kind-class tsd-has-type-parameter"><span class="tsd-kind-icon">Class with type parameter</span></li>
				<li class="tsd-kind-constructor tsd-parent-kind-class"><span class="tsd-kind-icon">Constructor</span></li>
				<li class="tsd-kind-property tsd-parent-kind-class"><span class="tsd-kind-icon">Property</span></li>
				<li class="tsd-kind-method tsd-parent-kind-class"><span class="tsd-kind-icon">Method</span></li>
				<li class="tsd-kind-accessor tsd-parent-kind-class"><span class="tsd-kind-icon">Accessor</span></li>
				<li class="tsd-kind-index-signature tsd-parent-kind-class"><span class="tsd-kind-icon">Index signature</span></li>
			</ul>
			<ul class="tsd-legend">
				<li class="tsd-kind-constructor tsd-parent-kind-class tsd-is-inherited"><span class="tsd-kind-icon">Inherited constructor</span></li>
				<li class="tsd-kind-property tsd-parent-kind-class tsd-is-inherited"><span class="tsd-kind-icon">Inherited property</span></li>
				<li class="tsd-kind-method tsd-parent-kind-class tsd-is-inherited"><span class="tsd-kind-icon">Inherited method</span></li>
				<li class="tsd-kind-accessor tsd-parent-kind-class tsd-is-inherited"><span class="tsd-kind-icon">Inherited accessor</span></li>
			</ul>
			<ul class="tsd-legend">
				<li class="tsd-kind-property tsd-parent-kind-class tsd-is-protected"><span class="tsd-kind-icon">Protected property</span></li>
				<li class="tsd-kind-method tsd-parent-kind-class tsd-is-protected"><span class="tsd-kind-icon">Protected method</span></li>
				<li class="tsd-kind-accessor tsd-parent-kind-class tsd-is-protected"><span class="tsd-kind-icon">Protected accessor</span></li>
			</ul>
			<ul class="tsd-legend">
				<li class="tsd-kind-property tsd-parent-kind-class tsd-is-private"><span class="tsd-kind-icon">Private property</span></li>
				<li class="tsd-kind-method tsd-parent-kind-class tsd-is-private"><span class="tsd-kind-icon">Private method</span></li>
				<li class="tsd-kind-accessor tsd-parent-kind-class tsd-is-private"><span class="tsd-kind-icon">Private accessor</span></li>
			</ul>
			<ul class="tsd-legend">
				<li class="tsd-kind-property tsd-parent-kind-class tsd-is-static"><span class="tsd-kind-icon">Static property</span></li>
				<li class="tsd-kind-call-signature tsd-parent-kind-class tsd-is-static"><span class="tsd-kind-icon">Static method</span></li>
			</ul>
		</div>
	</div>
</footer>
<div class="container tsd-generator">
	<p>Generated using <a href="http://typedoc.org/" target="_blank">TypeDoc</a></p>
</div>
<div class="overlay"></div>
<script src="assets/js/main.js"></script>
<script>if (location.protocol == 'file:') document.write('<script src="assets/js/search.js"><' + '/script>');</script>
</body>
</html>